<html>
<head>
	<title>testing</title>
	<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
	<script type="text/javascript" src="js/buttonFunctions.js"></script>
	<script type="text/javascript" src="js/firebaseFunctions.js"></script>
	<script type="text/javascript" src="js/session.js"></script>
	<script type="text/javascript" src="classes/user.js"></script>
	<script type="text/javascript" src="classes/moderator.js"></script>
	<script type="text/javascript" src="classes/admin.js"></script>
	<script type="text/javascript" src="classes/app.js"></script>
	<script type="text/javascript" src="classes/appItem.js"></script>

	<script type="text/javascript" src="js/firebase.js"></script>
	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">


</head>
<body>
	<header>
		<h1>AppHub</h1>
		<p id="welcome-user">Welcome collin!</p>
		<div id="header-buttons">
			<a href="login.html" class="header-button" id="login-button">
				<button id="header-logIn">Login</button></a>
			<a href="createAccount.html"  class="header-button" id="create-button">
				<button id="header-createAccount">Create an Account</button></a>
			<a href="appProposal.html" class="header-button" id="proposal-button">
				<button>Submit an App</button>
			</a>
			<a href="#" class="header-button" id="signout-button" onclick="signOut()">
				<button>Sign Out</button>
			</a>

		</div>
	</header>

	<ul id="app-list">
		
	</ul>

	<script type="text/javascript">
		$(document).ready(function(){

			let ref = database.ref('Apps');

			ref.once('value', function(snapshot){
				snapshot.forEach(function(snapshot){
					let app = snapshot.val();
					$("#app-list").append(getAppElement(app, snapshot.key)); //session.js
				});
			});
		});

		function getAppElement(app, key){
			var price;
			if(app.price != 0)
				price = "$" + app.price;
			else
				price = "Free!"

			var element = $('<li class="app-item">\
				<div class="top-block pure-g">\
					<h1 class="pure-u-1-3 title"><a href="appPage.html?key='+key+'">'+app.name+'</a></h1>\
				</div>\
				<div class="bottom-block pure-g">\
					<div class="pure-u-1-5 version"><p><b>Version</b></p>'+app.version+'</div>\
					<div class="pure-u-1-5 price"><p><b>Price:</b></p>'+price+'</div>\
					<div class="pure-u-1-5 devs"><p><b>Developers</b></p><ul>'+listElements(app.devs)+'</ul></div>\
					<div class="pure-u-1-5 plats"><p><b>Platforms</b></p><ul>'+listElements(app.platforms)+'</ul></div>\
					<div class="pure-u-1-5 link"><a href="'+app.link+'">Link</a></div>\
				</div>\
				</li>');	
			return element;
		}
	</script>

</body>
</html>